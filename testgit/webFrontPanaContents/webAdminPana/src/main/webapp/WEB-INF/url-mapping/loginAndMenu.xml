<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd">

  <!-- ログイン認証 -->
  <bean id="loginCommand" class="jp.co.transcosmos.dm3.core.login.command.LoggingLoginCommand"  scope="prototype">
    <property name="authentication" ref="authentication"/>
    <property name="logging" ref="authLogging"/>
    <property name="useSessionIdReset" value="true"/>
  </bean>

  <!-- ログアウト処理 -->
  <bean id="logoutCommand" class="jp.co.transcosmos.dm3.login.command.v3.LogoutCommand"  scope="prototype">
    <property name="authentication" ref="authentication"/>
    <property name="useSessionIdReset" value="true"/>
  </bean>


  <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMappingList">
    <property name="commandURLMapper" ref="commandURLMapper"/>
    <property name="mappings">
      <list>

        <!-- ログイン画面 -->
        <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMapping">
          <property name="urlPattern" value="/login/"/>
          <property name="defaultViewName" value="/WEB-INF/jsp/admin/login/Login.jsp"/>
        </bean>

        <!-- ログイン処理 -->
        <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMapping">
          <property name="urlPattern" value="/login/check/"/>
          <property name="defaultCommandName" value="loginCommand"/>
          <property name="defaultViewName" value="/WEB-INF/jsp/admin/login/Login.jsp"/>
          <property name="namedViews">
            <props>
              <prop key="success">redirect:###!webroot###/top/</prop>
            </props>
          </property>
        </bean>

        <!-- ログアウト処理 -->
        <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMapping">
          <property name="urlPattern" value="/login/logout/"/>
          <property name="defaultCommandName" value="logoutCommand"/>
          <property name="defaultViewName" value="redirect:###!webroot###/login/"/>
        </bean>

        <!-- メニュー画面  （Panasonic 用に変更）-->
        <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMapping">
          <property name="urlPattern">
            <list>
              <value>/top/</value>
            </list>
          </property>
          <property name="defaultViewName" value="/WEB-INF/jsp/admin/menu/Menu.jsp"/>
        </bean>

      </list>
    </property>
  </bean>

</beans>
