<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd">

  <!-- マイページログイン処理 -->
  <bean id="loginCommand" class="jp.co.transcosmos.dm3.login.command.v3.LoginCommand"  scope="prototype">
    <property name="authentication" ref="mypageAuth"/>
    <property name="loginForm">
      <bean class="jp.co.transcosmos.dm3.login.form.v3.AutoLoginForm" scope="prototype"/>
    </property>
    <property name="useSessionIdReset" value="true"/>
  </bean>

  <!-- マイページログアウト処理 -->
  <bean id="logoutCommand" class="jp.co.transcosmos.dm3.login.command.v3.LogoutCommand"  scope="prototype">
    <property name="authentication" ref="mypageAuth"/>
    <property name="useSessionIdReset" value="true"/>
  </bean>


  <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMappingList">
    <property name="commandURLMapper" ref="commandURLMapper"/>
    <property name="mappings">
      <list>

        <!-- ログイン画面 （Panasonic 版用ログインページを設定）-->
        <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMapping">
          <property name="urlPattern" value="/mypage/login/"/>
          <property name="defaultViewName" value="/WEB-INF/jsp/front/login/Login.jsp"/>
        </bean>

        <!-- ログイン処理  （Panasonic 版用ログインページを設定）-->
        <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMapping">
          <property name="urlPattern" value="/mypage/login/check/"/>
          <property name="defaultCommandName" value="loginCommand"/>
          <property name="defaultViewName" value="/WEB-INF/jsp/front/login/Login.jsp"/>
          <property name="namedViews">
            <props>
              <prop key="success">redirect:###!redirectURL###</prop>
            </props>
          </property>
        </bean>

        <!-- 物件問い合わせ用ログイン処理 -->
        <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMapping">
          <property name="urlPattern" value="/buy/inquiry/division/check/"/>
          <property name="defaultCommandName" value="loginCommand"/>
          <property name="defaultViewName" value="/WEB-INF/jsp/front/inquiryDivision/inquiryDivision.jsp"/>
          <property name="namedViews">
            <props>
              <prop key="success">redirect:###!redirectURL###</prop>
            </props>
          </property>
        </bean>

        <!-- ログアウト処理 -->
        <bean class="jp.co.transcosmos.dm3.servlet.URLCommandViewMapping">
          <property name="urlPattern" value="/mypage/logout/"/>
          <property name="defaultCommandName" value="logoutCommand"/>
          <property name="defaultViewName" value="redirect:###!webroot###/mypage/login/"/>
        </bean>

      </list>
    </property>
  </bean>

</beans>
